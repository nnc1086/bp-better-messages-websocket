/*! For license information please see webcam.min.js.LICENSE.txt */
"use strict";(this.webpackChunkBetterMessages=this.webpackChunkBetterMessages||[]).push([["node_modules_uppy_webcam_lib_index_js"],{10362:(e,t,n)=>{n(25276),n(27495),n(90906),e.exports=a,e.exports.isMobile=a,e.exports.default=a;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,i=/android|ipad|playbook|silk/i;function a(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=o.test(t)&&!r.test(t)||!!e.tablet&&i.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}},10826:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(18180);function r(e){return"object"===(0,o.A)(e)&&null!==e&&("nodeType"in e&&e.nodeType===Node.ELEMENT_NODE)}},13656:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(51531),r=n(18180),i=n(58237),a=n(84285);n(52675),n(83237),n(31073),n(16280),n(76918),n(2008),n(51629),n(64346),n(48598),n(44114),n(69085),n(67945),n(84185),n(83851),n(81278),n(79432),n(26099),n(84864),n(57465),n(27495),n(87745),n(38781),n(25440),n(90744),n(98992),n(54520),n(3949),n(23500);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var l=0;function p(e){return"__private_"+l+++"_"+e}function d(e,t,n){var o=[];return e.forEach((function(e){return"string"!=typeof e?o.push(e):t[Symbol.split](e).forEach((function(e,t,r){""!==e&&o.push(e),t<r.length-1&&o.push(n)}))})),o}function h(e,t){var n=/\$/g,o=[e];if(null==t)return o;for(var r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];if("_"!==a){var s=t[a];"string"==typeof s&&(s=n[Symbol.replace](s,"$$$$")),o=d(o,new RegExp("%\\{".concat(a,"\\}"),"g"),s)}}return o}var f=function(e){throw new Error("missing string: ".concat(e))},_=p("onMissingKey"),v=p("apply"),m=function(){return(0,a.A)((function e(t,n){(0,i.A)(this,e);var o=(void 0===n?{}:n).onMissingKey,r=void 0===o?f:o;Object.defineProperty(this,v,{value:g}),Object.defineProperty(this,_,{writable:!0,value:void 0}),this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(t)?t.forEach(u(this,v)[v],this):u(this,v)[v](t),u(this,_)[_]=r}),[{key:"translate",value:function(e,t){return this.translateArray(e,t).join("")}},{key:"translateArray",value:function(e,t){var n=this.locale.strings[e];if(null==n&&(u(this,_)[_](e),n=e),"object"===(0,r.A)(n)){if(t&&void 0!==t.smart_count)return h(n[this.locale.pluralize(t.smart_count)],t);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof n)throw new Error("string was not a string");return h(n,t)}}])}();function g(e){if(null!=e&&e.strings){var t=this.locale;Object.assign(this.locale,{strings:c(c({},t.strings),e.strings),pluralize:e.pluralize||t.pluralize})}}},31073:(e,t,n)=>{n(70511)("split")},32744:(e,t,n)=>{n.d(t,{A:()=>u});n(52675),n(2008),n(51629),n(44114),n(67945),n(84185),n(83851),n(81278),n(79432),n(26099),n(98992),n(54520),n(3949),n(23500);var o=n(51531),r=n(58237),i=n(84285),a=(n(16280),n(76918),n(94170),n(13656));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){return(0,i.A)((function e(t,n){(0,r.A)(this,e),this.uppy=t,this.opts=null!=n?n:{}}),[{key:"getPluginState",value:function(){var e=this.uppy.getState().plugins;return(null==e?void 0:e[this.id])||{}}},{key:"setPluginState",value:function(e){if(e){var t=this.uppy.getState().plugins;this.uppy.setState({plugins:c(c({},t),{},(0,o.A)({},this.id,c(c({},t[this.id]),e)))})}}},{key:"setOptions",value:function(e){this.opts=c(c({},this.opts),e),this.setPluginState(void 0),this.i18nInit()}},{key:"i18nInit",value:function(){var e=new a.A([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}},{key:"addTarget",value:function(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}},{key:"update",value:function(e){}},{key:"afterUpdate",value:function(){}}])}()},36118:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},36480:(e,t,n)=>{n.d(t,{FK:()=>x,Ob:()=>q,XX:()=>H,_3:()=>S,fF:()=>r,h:()=>w,uA:()=>P,v2:()=>D});var o,r,i,a,s,c,u,l,p,d,h,f=n(18180),_=(n(51629),n(25276),n(64346),n(23792),n(62062),n(44114),n(34782),n(15086),n(26910),n(94170),n(62010),n(26099),n(3362),n(27495),n(90906),n(31415),n(47764),n(25440),n(48718),n(98992),n(3949),n(81454),n(37550),n(23500),n(62953),n(76031),{}),v=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function y(e,t){for(var n in t)e[n]=t[n];return e}function b(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function w(e,t,n){var r,i,a,s={};for(a in t)"key"==a?r=t[a]:"ref"==a?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?o.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)null==s[a]&&(s[a]=e.defaultProps[a]);return k(e,s,r,i,null)}function k(e,t,n,o,a){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++i:a,__i:-1,__u:0};return null==a&&null!=r.vnode&&r.vnode(s),s}function S(){return{current:null}}function x(e){return e.children}function P(e,t){this.props=e,this.context=t}function O(e,t){if(null==t)return e.__?O(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?O(e):null}function R(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return R(e)}}function C(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!A.__r++||s!=r.debounceRendering)&&((s=r.debounceRendering)||c)(A)}function A(){for(var e,t,n,o,i,s,c,l=1;a.length;)a.length>l&&a.sort(u),e=a.shift(),l=a.length,e.__d&&(n=void 0,i=(o=(t=e).__v).__e,s=[],c=[],t.__P&&((n=y({},o)).__v=o.__v+1,r.vnode&&r.vnode(n),V(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[i]:null,s,null==i?O(o):i,!!(32&o.__u),c),n.__v=o.__v,n.__.__k[n.__i]=n,W(s,n,c),n.__e!=i&&R(n)));A.__r=0}function M(e,t,n,o,r,i,a,s,c,u,l){var p,d,h,f,m,g,y=o&&o.__k||v,b=t.length;for(c=T(n,t,y,c,b),p=0;p<b;p++)null!=(h=n.__k[p])&&(d=-1==h.__i?_:y[h.__i]||_,h.__i=p,g=V(e,h,d,r,i,a,s,c,u,l),f=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&U(d.ref,null,h),l.push(h.ref,h.__c||f,h)),null==m&&null!=f&&(m=f),4&h.__u||d.__k===h.__k?c=j(h,c,e):"function"==typeof h.type&&void 0!==g?c=g:f&&(c=f.nextSibling),h.__u&=-7);return n.__e=m,c}function T(e,t,n,o,r){var i,a,s,c,u,l=n.length,p=l,d=0;for(e.__k=new Array(r),i=0;i<r;i++)null!=(a=t[i])&&"boolean"!=typeof a&&"function"!=typeof a?(c=i+d,(a=e.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?k(null,a,null,null,null):g(a)?k(x,{children:a},null,null,null):null==a.constructor&&a.__b>0?k(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,-1!=(u=a.__i=E(a,n,c,p))&&(p--,(s=n[u])&&(s.__u|=2)),null==s||null==s.__v?(-1==u&&(r>l?d--:r<l&&d++),"function"!=typeof a.type&&(a.__u|=4)):u!=c&&(u==c-1?d--:u==c+1?d++:(u>c?d--:d++,a.__u|=4))):e.__k[i]=null;if(p)for(i=0;i<l;i++)null!=(s=n[i])&&!(2&s.__u)&&(s.__e==o&&(o=O(s)),B(s,s));return o}function j(e,t,n){var o,r;if("function"==typeof e.type){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=j(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=O(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function D(e,t){return t=t||[],null==e||"boolean"==typeof e||(g(e)?e.some((function(e){D(e,t)})):t.push(e)),t}function E(e,t,n,o){var r,i,a=e.key,s=e.type,c=t[n];if(null===c&&null==e.key||c&&a==c.key&&s==c.type&&!(2&c.__u))return n;if(o>(null==c||2&c.__u?0:1))for(r=n-1,i=n+1;r>=0||i<t.length;){if(r>=0){if((c=t[r])&&!(2&c.__u)&&a==c.key&&s==c.type)return r;r--}if(i<t.length){if((c=t[i])&&!(2&c.__u)&&a==c.key&&s==c.type)return i;i++}}return-1}function I(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||m.test(t)?n:n+"px"}function L(e,t,n,o,r){var i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||I(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||I(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(l,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=p,e.addEventListener(t,i?h:d,i)):e.removeEventListener(t,i?h:d,i);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function N(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=p++;else if(t.t<n.u)return;return n(r.event?r.event(t):t)}}}function V(e,t,n,o,i,a,s,c,u,l){var p,d,h,f,_,v,m,w,k,S,O,R,C,A,T,j,D,E=t.type;if(null!=t.constructor)return null;128&n.__u&&(u=!!(32&n.__u),a=[c=t.__e=n.__e]),(p=r.__b)&&p(t);e:if("function"==typeof E)try{if(w=t.props,k="prototype"in E&&E.prototype.render,S=(p=E.contextType)&&o[p.__c],O=p?S?S.props.value:p.__:o,n.__c?m=(d=t.__c=n.__c).__=d.__E:(k?t.__c=d=new E(w,O):(t.__c=d=new P(w,O),d.constructor=E,d.render=$),S&&S.sub(d),d.props=w,d.state||(d.state={}),d.context=O,d.__n=o,h=d.__d=!0,d.__h=[],d._sb=[]),k&&null==d.__s&&(d.__s=d.state),k&&null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=y({},d.__s)),y(d.__s,E.getDerivedStateFromProps(w,d.__s))),f=d.props,_=d.state,d.__v=t,h)k&&null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),k&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(k&&null==E.getDerivedStateFromProps&&w!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(w,O),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(w,d.__s,O)||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=w,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),R=0;R<d._sb.length;R++)d.__h.push(d._sb[R]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(w,d.__s,O),k&&null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,_,v)}))}if(d.context=O,d.props=w,d.__P=e,d.__e=!1,C=r.__r,A=0,k){for(d.state=d.__s,d.__d=!1,C&&C(t),p=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do{d.__d=!1,C&&C(t),p=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++A<25);d.state=d.__s,null!=d.getChildContext&&(o=y(y({},o),d.getChildContext())),k&&!h&&null!=d.getSnapshotBeforeUpdate&&(v=d.getSnapshotBeforeUpdate(f,_)),j=p,null!=p&&p.type===x&&null==p.key&&(j=F(p.props.children)),c=M(e,g(j)?j:[j],t,n,o,i,a,s,c,u,l),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),m&&(d.__E=d.__=null)}catch(e){if(t.__v=null,u||null!=a)if(e.then){for(t.__u|=u?160:128;c&&8==c.nodeType&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else for(D=a.length;D--;)b(a[D]);else t.__e=n.__e,t.__k=n.__k;r.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=z(n.__e,t,n,o,i,a,s,u,l);return(p=r.diffed)&&p(t),128&t.__u?void 0:c}function W(e,t,n){for(var o=0;o<n.length;o++)U(n[o],n[++o],n[++o]);r.__c&&r.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){r.__e(e,t.__v)}}))}function F(e){return"object"!=(0,f.A)(e)||null==e||e.__b&&e.__b>0?e:g(e)?e.map(F):y({},e)}function z(e,t,n,i,a,s,c,u,l){var p,d,h,f,v,m,y,w=n.props,k=t.props,S=t.type;if("svg"==S?a="http://www.w3.org/2000/svg":"math"==S?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(p=0;p<s.length;p++)if((v=s[p])&&"setAttribute"in v==!!S&&(S?v.localName==S:3==v.nodeType)){e=v,s[p]=null;break}if(null==e){if(null==S)return document.createTextNode(k);e=document.createElementNS(a,S,k.is&&k),u&&(r.__m&&r.__m(t,s),u=!1),s=null}if(null==S)w===k||u&&e.data==k||(e.data=k);else{if(s=s&&o.call(e.childNodes),w=n.props||_,!u&&null!=s)for(w={},p=0;p<e.attributes.length;p++)w[(v=e.attributes[p]).name]=v.value;for(p in w)if(v=w[p],"children"==p);else if("dangerouslySetInnerHTML"==p)h=v;else if(!(p in k)){if("value"==p&&"defaultValue"in k||"checked"==p&&"defaultChecked"in k)continue;L(e,p,null,v,a)}for(p in k)v=k[p],"children"==p?f=v:"dangerouslySetInnerHTML"==p?d=v:"value"==p?m=v:"checked"==p?y=v:u&&"function"!=typeof v||w[p]===v||L(e,p,v,w[p],a);if(d)u||h&&(d.__html==h.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),M("template"==t.type?e.content:e,g(f)?f:[f],t,n,i,"foreignObject"==S?"http://www.w3.org/1999/xhtml":a,s,c,s?s[0]:n.__k&&O(n,0),u,l),null!=s)for(p=s.length;p--;)b(s[p]);u||(p="value","progress"==S&&null==m?e.removeAttribute("value"):null!=m&&(m!==e[p]||"progress"==S&&!m||"option"==S&&m!=w[p])&&L(e,p,m,w[p],a),p="checked",null!=y&&y!=e[p]&&L(e,p,y,w[p],a))}return e}function U(e,t,n){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==t||(e.__u=e(t))}else e.current=t}catch(e){r.__e(e,n)}}function B(e,t,n){var o,i;if(r.unmount&&r.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||U(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){r.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&B(o[i],t,n||"function"!=typeof e.type);n||b(e.__e),e.__c=e.__=e.__e=void 0}function $(e,t,n){return this.constructor(e,n)}function H(e,t,n){var i,a,s,c;t==document&&(t=document.documentElement),r.__&&r.__(e,t),a=(i="function"==typeof n)?null:n&&n.__k||t.__k,s=[],c=[],V(t,e=(!i&&n||t).__k=w(x,null,[e]),a||_,_,t.namespaceURI,!i&&n?[n]:a?null:t.firstChild?o.call(t.childNodes):null,s,!i&&n?n:a?a.__e:t.firstChild,i,c),W(s,e,c)}function q(e,t,n){var r,i,a,s,c=y({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==a?r=t[a]:"ref"==a?i=t[a]:c[a]=null==t[a]&&null!=s?s[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?o.call(arguments,2):n),k(e.type,c,r||e.key,i||e.ref,null)}o=v.slice,r={__e:function(e,t,n,o){for(var r,i,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),a=r.__d),a)return r.__E=r}catch(t){e=t}throw e}},i=0,P.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=y({},this.state),"function"==typeof e&&(e=e(y({},n),this.props)),e&&y(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),C(this))},P.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),C(this))},P.prototype.render=x,a=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},A.__r=0,l=/(PointerCapture)$|Capture$/i,p=0,d=N(!1),h=N(!0)},63265:(e,t,n)=>{n.d(t,{A:()=>o});const o={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},73848:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(58237),r=n(84285),i=n(68119),a=n(36858),s=n(31061),c=n(46983),u=(n(16280),n(76918),n(28706),n(84185),n(26099),n(3362),n(60825),n(36480)),l=n(10826);const p=function(e,t){return void 0===t&&(t=document),"string"==typeof e?t.querySelector(e):(0,l.A)(e)?e:null};var d=n(36118),h=n(32744);function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function _(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var v=0;function m(e){return"__private_"+v+++"_"+e}var g=m("updateUI");const y=function(e){function t(){var e,n,r,s;return(0,o.A)(this,t),n=this,r=t,s=arguments,r=(0,a.A)(r),e=(0,i.A)(n,f()?Reflect.construct(r,s||[],(0,a.A)(n).constructor):r.apply(n,s)),Object.defineProperty(e,g,{writable:!0,value:void 0}),e}return(0,s.A)(t,e),(0,r.A)(t,[{key:"getTargetPlugin",value:function(e){var n;if("function"==typeof(null==e?void 0:e.addTarget))(n=e)instanceof t||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:t}}));else if("function"==typeof e){var o=e;this.uppy.iteratePlugins((function(e){e instanceof o&&(n=e)}))}return n}},{key:"mount",value:function(e,t){var n,o,r,i=this,a=t.id,s=p(e);if(s){this.isTargetDOMEl=!0;var l=document.createElement("div");return l.classList.add("uppy-Root"),_(this,g)[g]=(n=function(e){i.uppy.getPlugin(i.id)&&((0,u.XX)(i.render(e),l),i.afterUpdate())},r=null,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o=t,r||(r=Promise.resolve().then((function(){return r=null,n.apply(void 0,(0,c.A)(o))}))),r}),this.uppy.log("Installing ".concat(a," to a DOM element '").concat(e,"'")),this.opts.replaceTargetContent&&(s.innerHTML=""),(0,u.XX)(this.render(this.uppy.getState()),l),this.el=l,s.appendChild(l),l.dir=this.opts.direction||(0,d.A)(l)||"ltr",this.onMount(),this.el}var h=this.getTargetPlugin(e);if(h)return this.uppy.log("Installing ".concat(a," to ").concat(h.id)),this.parent=h,this.el=h.addTarget(t),this.onMount(),this.el;this.uppy.log("Not installing ".concat(a));var f="Invalid target option given to ".concat(a,".");throw f+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(f)}},{key:"render",value:function(e){throw new Error("Extend the render method to add your plugin to a DOM element")}},{key:"update",value:function(e){var t,n;null!=this.el&&(null==(t=(n=_(this,g))[g])||t.call(n,e))}},{key:"unmount",value:function(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove());this.onUnmount()}},{key:"onMount",value:function(){}},{key:"onUnmount",value:function(){}}])}(h.A)},73886:(e,t,n)=>{n.r(t),n.d(t,{"default":()=>$});var o=n(18180),r=n(18443),i=n(51531),a=n(58237),s=n(84285),c=n(68119),u=n(36858),l=n(20423),p=n(31061),d=n(61792),h=(n(52675),n(16280),n(76918),n(28706),n(2008),n(50113),n(51629),n(74423),n(25276),n(23792),n(62062),n(44114),n(72712),n(34782),n(15086),n(59089),n(94170),n(69085),n(67945),n(84185),n(83851),n(81278),n(79432),n(26099),n(3362),n(60825),n(27495),n(90906),n(21699),n(47764),n(71761),n(98992),n(54520),n(72577),n(3949),n(81454),n(8872),n(37550),n(23500),n(62953),n(76031),n(3296),n(27208),n(48408),n(36480)),f=n(73848),_=n(80241),v={__proto__:null,"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function m(e){var t=e.split(";",1);return e=(0,_.A)(t,1)[0],v[e]||null}var g=n(63265),y=n(10362);const b=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},(0,h.h)("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))},w=function(e){var t=e.onSnapshot,n=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:n("takePicture"),"aria-label":n("takePicture"),onClick:t,"data-uppy-super-focusable":!0},b())};function k(e){var t=e.recording,n=e.onStartRecording,o=e.onStopRecording,r=e.i18n;return t?(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:r("stopRecording"),"aria-label":r("stopRecording"),onClick:o,"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,h.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:r("startRecording"),"aria-label":r("startRecording"),onClick:n,"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,h.h)("circle",{cx:"50",cy:"50",r:"40"})))}n(68156);function S(e){var t,n=e.recordingLengthSeconds,o=e.i18n,r=(t=n,"".concat(Math.floor(t/60),":").concat(String(t%60).padStart(2,0)));return(0,h.h)("span",{"aria-label":o("recordingLength",{recording_length:r})},r)}const x=function(e){var t=e.onSubmit,n=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:n("submitRecordedFile"),"aria-label":n("submitRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,h.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,h.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};const P=function(e){var t=e.onDiscard,n=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:n("discardRecordedFile"),"aria-label":n("discardRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,h.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,h.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,h.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,h.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},R.apply(this,arguments)}function C(e,t){return e.includes(t)}const A=function(e){function t(){return(0,a.A)(this,t),e=this,n=t,o=arguments,n=(0,u.A)(n),(0,c.A)(e,O()?Reflect.construct(n,o||[],(0,u.A)(e).constructor):n.apply(e,o));var e,n,o}return(0,p.A)(t,e),(0,s.A)(t,[{key:"componentDidMount",value:function(){(0,this.props.onFocus)()}},{key:"componentWillUnmount",value:function(){(0,this.props.onStop)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.recordedVideo,r=t.recording,i=t.modes,a=t.supportsRecording,s=t.videoSources,c=t.showVideoSourceDropdown,u=t.showRecordingLength,l=t.onSubmit,p=t.i18n,d=t.mirror,f=t.onSnapshot,_=t.onStartRecording,v=t.onStopRecording,m=t.onDiscardRecordedVideo,g=t.recordingLengthSeconds,y=!!o,b=!y&&a&&(C(i,"video-only")||C(i,"audio-only")||C(i,"video-audio")),O=!y&&C(i,"picture"),A=a&&u&&!y,M=c&&s&&s.length>1,T={playsinline:!0};return o?(T.muted=!1,T.controls=!0,T.src=o,this.videoElement&&(this.videoElement.srcObject=void 0)):(T.muted=!0,T.autoplay=!0,T.srcObject=n),(0,h.h)("div",{className:"uppy uppy-Webcam-container"},(0,h.h)("div",{className:"uppy-Webcam-videoContainer"},(0,h.h)("video",R({ref:function(t){return e.videoElement=t},className:"uppy-Webcam-video  ".concat(d?"uppy-Webcam-video--mirrored":"")},T))),(0,h.h)("div",{className:"uppy-Webcam-footer"},(0,h.h)("div",{className:"uppy-Webcam-videoSourceContainer"},M?function(e){var t=e.currentDeviceId,n=e.videoSources,o=e.onChangeVideoSource;return(0,h.h)("div",{className:"uppy-Webcam-videoSource"},(0,h.h)("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:function(e){o(e.target.value)}},n.map((function(e){return(0,h.h)("option",{key:e.deviceId,value:e.deviceId,selected:e.deviceId===t},e.label)}))))}(this.props):null),(0,h.h)("div",{className:"uppy-Webcam-buttonContainer"},O&&(0,h.h)(w,{onSnapshot:f,i18n:p}),b&&(0,h.h)(k,{recording:r,onStartRecording:_,onStopRecording:v,i18n:p}),y&&(0,h.h)(x,{onSubmit:l,i18n:p}),y&&(0,h.h)(P,{onDiscard:m,i18n:p})),(0,h.h)("div",{className:"uppy-Webcam-recordingLength"},A&&(0,h.h)(S,{recordingLengthSeconds:g,i18n:p}))))}}])}(h.uA),M=function(e){var t=e.icon,n=e.i18n,o=e.hasCamera;return(0,h.h)("div",{className:"uppy-Webcam-permissons"},(0,h.h)("div",{className:"uppy-Webcam-permissonsIcon"},t()),(0,h.h)("h1",{className:"uppy-Webcam-title"},n(o?"allowAccessTitle":"noCameraTitle")),(0,h.h)("p",null,n(o?"allowAccessDescription":"noCameraDescription")))},T={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},I.apply(this,arguments)}function L(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var N=0;function V(e){return"__private_"+N+++"_"+e}function W(e){return"."===e[0]?g.A[e.slice(1)]:e}function F(e){return/^video\/[^*]+$/.test(e)}function z(e){return/^image\/[^*]+$/.test(e)}function U(e,t){return e.includes(t)}var B=V("enableMirror"),$=function(e){function t(e,n){var o,r,i,s;(0,a.A)(this,t),r=this,i=t,s=[e,n],i=(0,u.A)(i),o=(0,c.A)(r,E()?Reflect.construct(i,s||[],(0,u.A)(r).constructor):i.apply(r,s)),Object.defineProperty(o,B,{writable:!0,value:void 0}),o.mediaDevices=navigator.mediaDevices,o.supportsUserMedia=!!o.mediaDevices,o.protocol=location.protocol.match(/https/i)?"https":"http",o.id=o.opts.id||"Webcam",o.type="acquirer",o.capturedMediaFile=null,o.icon=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383",fillRule:"nonzero"}))},o.defaultLocale=T;var l={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",videoConstraints:void 0,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:y({tablet:!0})};return o.opts=D(D({},l),n),o.i18nInit(),o.title=o.i18n("pluginNameCamera"),L(o,B)[B]=o.opts.mirror,o.install=o.install.bind(o),o.setPluginState=o.setPluginState.bind(o),o.render=o.render.bind(o),o.start=o.start.bind(o),o.stop=o.stop.bind(o),o.takeSnapshot=o.takeSnapshot.bind(o),o.startRecording=o.startRecording.bind(o),o.stopRecording=o.stopRecording.bind(o),o.discardRecordedVideo=o.discardRecordedVideo.bind(o),o.submit=o.submit.bind(o),o.oneTwoThreeSmile=o.oneTwoThreeSmile.bind(o),o.focus=o.focus.bind(o),o.changeVideoSource=o.changeVideoSource.bind(o),o.webcamActive=!1,o.opts.countdown&&(o.opts.onBeforeSnapshot=o.oneTwoThreeSmile),o.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null}),o}return(0,p.A)(t,e),(0,s.A)(t,[{key:"setOptions",value:function(e){var n,o,r,i,a;(n=t,o="setOptions",r=this,i=3,a=(0,l.A)((0,u.A)(1&i?n.prototype:n),o,r),2&i&&"function"==typeof a?function(e){return a.apply(r,e)}:a)([D(D({},e),{},{videoConstraints:D(D({},this.opts.videoConstraints),null==e?void 0:e.videoConstraints)})])}},{key:"hasCameraCheck",value:function(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then((function(e){return e.some((function(e){return"videoinput"===e.kind}))})):Promise.resolve(!1)}},{key:"isAudioOnly",value:function(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]}},{key:"getConstraints",value:function(e){void 0===e&&(e=null);var t=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),n=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),o=D(D({},this.opts.videoConstraints||{facingMode:this.opts.facingMode}),e?{deviceId:e,facingMode:null}:{});return{audio:t,video:!!n&&o}}},{key:"start",value:function(e){var t=this;if(void 0===e&&(e=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(L(this,B)[B]=!0);var n=this.getConstraints(e&&e.deviceId?e.deviceId:null);this.hasCameraCheck().then((function(o){return t.setPluginState({hasCamera:o}),t.mediaDevices.getUserMedia(n).then((function(n){t.stream=n;var o=null,r=t.isAudioOnly()?n.getAudioTracks():n.getVideoTracks();e&&e.deviceId?r.forEach((function(t){t.getSettings().deviceId===e.deviceId&&(o=t.getSettings().deviceId)})):o=r[0].getSettings().deviceId,t.updateVideoSources(),t.setPluginState({currentDeviceId:o,cameraReady:!0})})).catch((function(e){t.setPluginState({cameraReady:!1,cameraError:e}),t.uppy.info(e.message,"error")}))}))}},{key:"getMediaRecorderOptions",value:function(){var e={};if(MediaRecorder.isTypeSupported){var t=this.uppy.opts.restrictions,n=[];this.opts.preferredVideoMimeType?n=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(n=t.allowedFileTypes.map(W).filter(F));var o=n.filter((function(e){return MediaRecorder.isTypeSupported(e)&&m(e)}));o.length>0&&(e.mimeType=o[0])}return e}},{key:"startRecording",value:function(){var e=this;this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];var t=!1;this.recorder.addEventListener("dataavailable",(function(n){e.recordingChunks.push(n.data);var o=e.uppy.opts.restrictions;if(e.recordingChunks.length>1&&null!=o.maxFileSize&&!t){var r=e.recordingChunks.reduce((function(e,t){return e+t.size}),0),i=3*((r-e.recordingChunks[0].size)/(e.recordingChunks.length-1));r>Math.max(0,o.maxFileSize-i)&&(t=!0,e.uppy.info(e.i18n("recordingStoppedMaxSize"),"warning",4e3),e.stopRecording())}})),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval((function(){var t=e.getPluginState().recordingLengthSeconds;e.setPluginState({recordingLengthSeconds:t+1})}),1e3)),this.setPluginState({isRecording:!0})}},{key:"stopRecording",value:function(){var e=this;return new Promise((function(t){e.recorder.addEventListener("stop",(function(){t()})),e.recorder.stop(),e.opts.showRecordingLength&&(clearInterval(e.recordingLengthTimer),e.setPluginState({recordingLengthSeconds:0}))})).then((function(){return e.setPluginState({isRecording:!1}),e.getVideo()})).then((function(t){try{e.capturedMediaFile=t,e.setPluginState({recordedVideo:URL.createObjectURL(t.data)}),L(e,B)[B]=!1}catch(t){t.isRestriction||e.uppy.log(t)}})).then((function(){e.recordingChunks=null,e.recorder=null}),(function(t){throw e.recordingChunks=null,e.recorder=null,t}))}},{key:"discardRecordedVideo",value:function(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(L(this,B)[B]=!0),this.capturedMediaFile=null}},{key:"submit",value:function(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(e){e.isRestriction||this.uppy.log(e,"error")}}},{key:"stop",value:(n=(0,r.A)(d.mark((function e(){var t,n,o=this;return d.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stream&&(t=this.stream.getAudioTracks(),n=this.stream.getVideoTracks(),t.concat(n).forEach((function(e){return e.stop()}))),!this.recorder){e.next=4;break}return e.next=4,new Promise((function(e){o.recorder.addEventListener("stop",e,{once:!0}),o.recorder.stop(),o.opts.showRecordingLength&&clearInterval(o.recordingLengthTimer)}));case 4:this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0});case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getVideoElement",value:function(){return this.el.querySelector(".uppy-Webcam-video")}},{key:"oneTwoThreeSmile",value:function(){var e=this;return new Promise((function(t,n){var o=e.opts.countdown,r=setInterval((function(){if(!e.webcamActive)return clearInterval(r),e.captureInProgress=!1,n(new Error("Webcam is not active"));o>0?(e.uppy.info("".concat(o,"..."),"warning",800),o--):(clearInterval(r),e.uppy.info(e.i18n("smile"),"success",1500),setTimeout((function(){return t()}),1500))}),1e3)}))}},{key:"takeSnapshot",value:function(){var e=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch((function(t){var n="object"===(0,o.A)(t)?t.message:t;return e.uppy.info(n,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: ".concat(n)))})).then((function(){return e.getImage()})).then((function(t){e.captureInProgress=!1;try{e.uppy.addFile(t)}catch(t){t.isRestriction||e.uppy.log(t)}}),(function(t){throw e.captureInProgress=!1,t})))}},{key:"getImage",value:function(){var e=this,t=this.getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var n=t.videoWidth,o=t.videoHeight,r=document.createElement("canvas");r.width=n,r.height=o,r.getContext("2d").drawImage(t,0,0);var i=this.uppy.opts.restrictions,a=[];this.opts.preferredImageMimeType?a=[this.opts.preferredImageMimeType]:i.allowedFileTypes&&(a=i.allowedFileTypes.map(W).filter(z));var s=a[0]||"image/jpeg",c=m(s)||"jpg",u="cam-".concat(Date.now(),".").concat(c);return function(e,t,n){return new Promise((function(o){e.toBlob(o,t,n)}))}(r,s).then((function(t){return{source:e.id,name:u,data:new Blob([t],{type:s}),type:s}}))}},{key:"getVideo",value:function(){var e=this.recordingChunks.find((function(e){var t;return(null==(t=e.type)?void 0:t.length)>0})).type,t=m(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'.concat(e,'"')));var n="webcam-".concat(Date.now(),".").concat(t),o=new Blob(this.recordingChunks,{type:e}),r={source:this.id,name:n,data:new Blob([o],{type:e}),type:e};return Promise.resolve(r)}},{key:"focus",value:function(){var e=this;this.opts.countdown&&setTimeout((function(){e.uppy.info(e.i18n("smile"),"success",1500)}),1e3)}},{key:"changeVideoSource",value:function(e){this.stop(),this.start({deviceId:e})}},{key:"updateVideoSources",value:function(){var e=this;this.mediaDevices.enumerateDevices().then((function(t){e.setPluginState({videoSources:t.filter((function(e){return"videoinput"===e.kind}))})}))}},{key:"render",value:function(){this.webcamActive||this.start();var e=this.getPluginState();return e.cameraReady&&e.hasCamera?(0,h.h)(A,I({},e,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start,recording:e.isRecording,mirror:L(this,B)[B],src:this.stream})):(0,h.h)(M,{icon:b,i18n:this.i18n,hasCamera:e.hasCamera})}},{key:"install",value:function(){var e,t=this,n=this.opts,o=n.mobileNativeCamera,r=n.modes,i=n.facingMode,a=n.videoConstraints,s=this.opts.target;o&&s?null==(e=this.getTargetPlugin(s))||e.setOptions({showNativeVideoCameraButton:U(r,"video-only")||U(r,"video-audio"),showNativePhotoCameraButton:U(r,"picture"),nativeCameraFacingMode:(null==a?void 0:a.facingMode)||i}):(this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),s&&this.mount(s,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=function(){if(t.updateVideoSources(),t.stream){var e=!0,n=t.getPluginState(),o=n.videoSources,r=n.currentDeviceId;o.forEach((function(t){r===t.deviceId&&(e=!1)})),e&&(t.stop(),t.start())}}))}},{key:"uninstall",value:function(){this.stop(),this.unmount()}},{key:"onUnmount",value:function(){this.stop()}}]);var n}(f.A);$.VERSION="3.3.6"},83237:(e,t,n)=>{n(70511)("replace")}}]);