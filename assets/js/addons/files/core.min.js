/*! For license information please see core.min.js.LICENSE.txt */
(this.webpackChunkBetterMessages=this.webpackChunkBetterMessages||[]).push([["node_modules_uppy_core_lib_index_js"],{4294:(e,t,n)=>{"use strict";var r=n(46518),i=n(97751),o=n(18745),s=n(79039),a=n(14601),l="AggregateError",u=i(l),c=!s((function(){return 1!==u([1]).errors[0]}))&&s((function(){return 7!==u([1],l,{cause:7}).cause}));r({global:!0,constructor:!0,arity:2,forced:c},{AggregateError:a(l,(function(e){return function(t,n){return o(e,this,arguments)}}),c,!0)})},10826:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(18180);function i(e){return"object"===(0,r.A)(e)&&null!==e&&("nodeType"in e&&e.nodeType===Node.ELEMENT_NODE)}},13656:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(51531),i=n(18180),o=n(58237),s=n(84285);n(52675),n(83237),n(31073),n(16280),n(76918),n(2008),n(51629),n(64346),n(48598),n(44114),n(69085),n(67945),n(84185),n(83851),n(81278),n(79432),n(26099),n(84864),n(57465),n(27495),n(87745),n(38781),n(25440),n(90744),n(98992),n(54520),n(3949),n(23500);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var c=0;function f(e){return"__private_"+c+++"_"+e}function d(e,t,n){var r=[];return e.forEach((function(e){return"string"!=typeof e?r.push(e):t[Symbol.split](e).forEach((function(e,t,i){""!==e&&r.push(e),t<i.length-1&&r.push(n)}))})),r}function p(e,t){var n=/\$/g,r=[e];if(null==t)return r;for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if("_"!==s){var a=t[s];"string"==typeof a&&(a=n[Symbol.replace](a,"$$$$")),r=d(r,new RegExp("%\\{".concat(s,"\\}"),"g"),a)}}return r}var h=function(e){throw new Error("missing string: ".concat(e))},g=f("onMissingKey"),v=f("apply"),y=function(){return(0,s.A)((function e(t,n){(0,o.A)(this,e);var r=(void 0===n?{}:n).onMissingKey,i=void 0===r?h:r;Object.defineProperty(this,v,{value:m}),Object.defineProperty(this,g,{writable:!0,value:void 0}),this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(t)?t.forEach(u(this,v)[v],this):u(this,v)[v](t),u(this,g)[g]=i}),[{key:"translate",value:function(e,t){return this.translateArray(e,t).join("")}},{key:"translateArray",value:function(e,t){var n=this.locale.strings[e];if(null==n&&(u(this,g)[g](e),n=e),"object"===(0,i.A)(n)){if(t&&void 0!==t.smart_count)return p(n[this.locale.pluralize(t.smart_count)],t);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if("string"!=typeof n)throw new Error("string was not a string");return p(n,t)}}])}();function m(e){if(null!=e&&e.strings){var t=this.locale;Object.assign(this.locale,{strings:l(l({},t.strings),e.strings),pluralize:e.pluralize||t.pluralize})}}},17145:(e,t,n)=>{"use strict";var r=n(46518),i=n(1625),o=n(42787),s=n(52967),a=n(77740),l=n(2360),u=n(66699),c=n(6980),f=n(77584),d=n(80747),p=n(72652),h=n(32603),g=n(78227)("toStringTag"),v=Error,y=[].push,m=function(e,t){var n,r=i(_,this);s?n=s(new v,r?o(this):_):(n=r?this:l(_),u(n,g,"Error")),void 0!==t&&u(n,"message",h(t)),d(n,m,n.stack,1),arguments.length>2&&f(n,arguments[2]);var a=[];return p(e,y,{that:a}),u(n,"errors",a),n};s?s(m,v):a(m,v,{name:!0});var _=m.prototype=l(v.prototype,{constructor:c(1,m),message:c(1,""),name:c(1,"AggregateError")});r({global:!0,constructor:!0,arity:2},{AggregateError:m})},21214:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var r=n(51531),i=(n(76918),n(52675),n(2008),n(51629),n(23792),n(44114),n(23288),n(62010),n(67945),n(84185),n(83851),n(81278),n(79432),n(26099),n(27495),n(38781),n(31415),n(47764),n(25440),n(98992),n(54520),n(3949),n(23500),n(62953),n(51494));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){var t="";return e.replace(/[^A-Z0-9]/gi,(function(e){return t+="-".concat(function(e){return e.charCodeAt(0).toString(32)}(e)),"/"}))+t}function l(e,t){if(function(e){return!(!e.isRemote||!e.remote)&&new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}(e))return e.id;var n=(0,i.A)(e);return function(e,t){var n=t||"uppy";return"string"==typeof e.name&&(n+="-".concat(a(e.name.toLowerCase()))),void 0!==e.type&&(n+="-".concat(e.type)),e.meta&&"string"==typeof e.meta.relativePath&&(n+="-".concat(a(e.meta.relativePath.toLowerCase()))),void 0!==e.data.size&&(n+="-".concat(e.data.size)),void 0!==e.data.lastModified&&(n+="-".concat(e.data.lastModified)),n}(s(s({},e),{},{type:n}),t)}},21397:(e,t,n)=>{var r=n(29119),i=/[\/\+\.]/;e.exports=function(e,t){function n(t){var n=r(t,e,i);return n&&n.length>=2}return t?n(t.split(";")[0]):n}},26656:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BasePlugin:()=>o.A,UIPlugin:()=>i.A,Uppy:()=>r.A,debugLogger:()=>s.w,"default":()=>r.A});var r=n(78655),i=n(73848),o=n(32744),s=n(77001)},29119:(e,t,n)=>{"use strict";var r=n(89990);function i(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}n(25276),n(54554),n(27495),n(71761),n(90744),i.prototype.match=function(e){var t,n,i=!0,o=this.parts,s=o.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;i&&t<s;t++)"*"!==o[t]&&(i=t<n.length&&o[t]===n[t]);i=i&&n}else i=!1;else if("function"==typeof e.splice)for(i=[],t=e.length;t--;)this.match(e[t])&&(i[i.length]=e[t]);else if("object"==r(e))for(var a in i={},e)this.match(a)&&(i[a]=e[a]);return i},e.exports=function(e,t,n){var r=new i(e,n||/[\/\.]/);return void 0!==t?r.match(t):r}},30067:(e,t,n)=>{"use strict";n(17145)},30237:(e,t,n)=>{"use strict";n(6469)("flatMap")},30531:(e,t,n)=>{"use strict";var r=n(46518),i=n(69565),o=n(79306),s=n(28551),a=n(1767),l=n(48646),u=n(19462),c=n(9539),f=n(96395),d=u((function(){for(var e,t,n=this.iterator,r=this.mapper;;){if(t=this.inner)try{if(!(e=s(i(t.next,t.iterator))).done)return e.value;this.inner=null}catch(e){c(n,"throw",e)}if(e=s(i(this.next,n)),this.done=!!e.done)return;try{this.inner=l(r(e.value,this.counter++),!1)}catch(e){c(n,"throw",e)}}}));r({target:"Iterator",proto:!0,real:!0,forced:f},{flatMap:function(e){return s(this),o(e),new d(a(this),{mapper:e,inner:null})}})},30670:(e,t,n)=>{"use strict";n(30531)},31073:(e,t,n)=>{"use strict";n(70511)("split")},32744:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});n(52675),n(2008),n(51629),n(44114),n(67945),n(84185),n(83851),n(81278),n(79432),n(26099),n(98992),n(54520),n(3949),n(23500);var r=n(51531),i=n(58237),o=n(84285),s=(n(16280),n(76918),n(94170),n(13656));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){return(0,o.A)((function e(t,n){(0,i.A)(this,e),this.uppy=t,this.opts=null!=n?n:{}}),[{key:"getPluginState",value:function(){var e=this.uppy.getState().plugins;return(null==e?void 0:e[this.id])||{}}},{key:"setPluginState",value:function(e){if(e){var t=this.uppy.getState().plugins;this.uppy.setState({plugins:l(l({},t),{},(0,r.A)({},this.id,l(l({},t[this.id]),e)))})}}},{key:"setOptions",value:function(e){this.opts=l(l({},this.opts),e),this.setPluginState(void 0),this.i18nInit()}},{key:"i18nInit",value:function(){var e=new s.A([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}},{key:"addTarget",value:function(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}},{key:"update",value:function(e){}},{key:"afterUpdate",value:function(){}}])}()},34034:(e,t,n)=>{n(16280),n(76918);var r=n(59209),i=n(67873);e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(e,t,{"leading":o,"maxWait":t,"trailing":s})}},35252:(e,t,n)=>{n(34782),n(27495),n(25440);var r=n(79876),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},36118:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},36480:(e,t,n)=>{"use strict";n.d(t,{FK:()=>k,Ob:()=>X,XX:()=>H,_3:()=>S,fF:()=>i,h:()=>w,uA:()=>A,v2:()=>M});var r,i,o,s,a,l,u,c,f,d,p,h=n(18180),g=(n(51629),n(25276),n(64346),n(23792),n(62062),n(44114),n(34782),n(15086),n(26910),n(94170),n(62010),n(26099),n(3362),n(27495),n(90906),n(31415),n(47764),n(25440),n(48718),n(98992),n(3949),n(81454),n(37550),n(23500),n(62953),n(76031),{}),v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function _(e,t){for(var n in t)e[n]=t[n];return e}function b(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function w(e,t,n){var i,o,s,a={};for(s in t)"key"==s?i=t[s]:"ref"==s?o=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)null==a[s]&&(a[s]=e.defaultProps[s]);return O(e,a,i,o,null)}function O(e,t,n,r,s){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==s?++o:s,__i:-1,__u:0};return null==s&&null!=i.vnode&&i.vnode(a),a}function S(){return{current:null}}function k(e){return e.children}function A(e,t){this.props=e,this.context=t}function P(e,t){if(null==t)return e.__?P(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?P(e):null}function x(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return x(e)}}function F(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!j.__r++||a!=i.debounceRendering)&&((a=i.debounceRendering)||l)(j)}function j(){for(var e,t,n,r,o,a,l,c=1;s.length;)s.length>c&&s.sort(u),e=s.shift(),c=s.length,e.__d&&(n=void 0,o=(r=(t=e).__v).__e,a=[],l=[],t.__P&&((n=_({},r)).__v=r.__v+1,i.vnode&&i.vnode(n),D(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[o]:null,a,null==o?P(r):o,!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,z(a,n,l),n.__e!=o&&x(n)));j.__r=0}function E(e,t,n,r,i,o,s,a,l,u,c){var f,d,p,h,y,m,_=r&&r.__k||v,b=t.length;for(l=U(n,t,_,l,b),f=0;f<b;f++)null!=(p=n.__k[f])&&(d=-1==p.__i?g:_[p.__i]||g,p.__i=f,m=D(e,p,d,i,o,s,a,l,u,c),h=p.__e,p.ref&&d.ref!=p.ref&&(d.ref&&q(d.ref,null,p),c.push(p.ref,p.__c||h,p)),null==y&&null!=h&&(y=h),4&p.__u||d.__k===p.__k?l=T(p,l,e):"function"==typeof p.type&&void 0!==m?l=m:h&&(l=h.nextSibling),p.__u&=-7);return n.__e=y,l}function U(e,t,n,r,i){var o,s,a,l,u,c=n.length,f=c,d=0;for(e.__k=new Array(i),o=0;o<i;o++)null!=(s=t[o])&&"boolean"!=typeof s&&"function"!=typeof s?(l=o+d,(s=e.__k[o]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?O(null,s,null,null,null):m(s)?O(k,{children:s},null,null,null):null==s.constructor&&s.__b>0?O(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,-1!=(u=s.__i=I(s,n,l,f))&&(f--,(a=n[u])&&(a.__u|=2)),null==a||null==a.__v?(-1==u&&(i>c?d--:i<c&&d++),"function"!=typeof s.type&&(s.__u|=4)):u!=l&&(u==l-1?d--:u==l+1?d++:(u>l?d--:d++,s.__u|=4))):e.__k[o]=null;if(f)for(o=0;o<c;o++)null!=(a=n[o])&&!(2&a.__u)&&(a.__e==r&&(r=P(a)),W(a,a));return r}function T(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=T(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=P(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function M(e,t){return t=t||[],null==e||"boolean"==typeof e||(m(e)?e.some((function(e){M(e,t)})):t.push(e)),t}function I(e,t,n,r){var i,o,s=e.key,a=e.type,l=t[n];if(null===l&&null==e.key||l&&s==l.key&&a==l.type&&!(2&l.__u))return n;if(r>(null==l||2&l.__u?0:1))for(i=n-1,o=n+1;i>=0||o<t.length;){if(i>=0){if((l=t[i])&&!(2&l.__u)&&s==l.key&&a==l.type)return i;i--}if(o<t.length){if((l=t[o])&&!(2&l.__u)&&s==l.key&&a==l.type)return o;o++}}return-1}function N(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||y.test(t)?n:n+"px"}function C(e,t,n,r,i){var o;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||N(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||N(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace(c,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=f,e.addEventListener(t,o?p:d,o)):e.removeEventListener(t,o?p:d,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function R(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=f++;else if(t.t<n.u)return;return n(i.event?i.event(t):t)}}}function D(e,t,n,r,o,s,a,l,u,c){var f,d,p,h,g,v,y,w,O,S,P,x,F,j,U,T,M,I=t.type;if(null!=t.constructor)return null;128&n.__u&&(u=!!(32&n.__u),s=[l=t.__e=n.__e]),(f=i.__b)&&f(t);e:if("function"==typeof I)try{if(w=t.props,O="prototype"in I&&I.prototype.render,S=(f=I.contextType)&&r[f.__c],P=f?S?S.props.value:f.__:r,n.__c?y=(d=t.__c=n.__c).__=d.__E:(O?t.__c=d=new I(w,P):(t.__c=d=new A(w,P),d.constructor=I,d.render=$),S&&S.sub(d),d.props=w,d.state||(d.state={}),d.context=P,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),O&&null==d.__s&&(d.__s=d.state),O&&null!=I.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=_({},d.__s)),_(d.__s,I.getDerivedStateFromProps(w,d.__s))),h=d.props,g=d.state,d.__v=t,p)O&&null==I.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),O&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(O&&null==I.getDerivedStateFromProps&&w!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(w,P),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(w,d.__s,P)||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=w,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(w,d.__s,P),O&&null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,g,v)}))}if(d.context=P,d.props=w,d.__P=e,d.__e=!1,F=i.__r,j=0,O){for(d.state=d.__s,d.__d=!1,F&&F(t),f=d.render(d.props,d.state,d.context),U=0;U<d._sb.length;U++)d.__h.push(d._sb[U]);d._sb=[]}else do{d.__d=!1,F&&F(t),f=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++j<25);d.state=d.__s,null!=d.getChildContext&&(r=_(_({},r),d.getChildContext())),O&&!p&&null!=d.getSnapshotBeforeUpdate&&(v=d.getSnapshotBeforeUpdate(h,g)),T=f,null!=f&&f.type===k&&null==f.key&&(T=L(f.props.children)),l=E(e,m(T)?T:[T],t,n,r,o,s,a,l,u,c),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),y&&(d.__E=d.__=null)}catch(e){if(t.__v=null,u||null!=s)if(e.then){for(t.__u|=u?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,t.__e=l}else for(M=s.length;M--;)b(s[M]);else t.__e=n.__e,t.__k=n.__k;i.__e(e,t,n)}else null==s&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=B(n.__e,t,n,r,o,s,a,u,c);return(f=i.diffed)&&f(t),128&t.__u?void 0:l}function z(e,t,n){for(var r=0;r<n.length;r++)q(n[r],n[++r],n[++r]);i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function L(e){return"object"!=(0,h.A)(e)||null==e||e.__b&&e.__b>0?e:m(e)?e.map(L):_({},e)}function B(e,t,n,o,s,a,l,u,c){var f,d,p,h,v,y,_,w=n.props,O=t.props,S=t.type;if("svg"==S?s="http://www.w3.org/2000/svg":"math"==S?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=a)for(f=0;f<a.length;f++)if((v=a[f])&&"setAttribute"in v==!!S&&(S?v.localName==S:3==v.nodeType)){e=v,a[f]=null;break}if(null==e){if(null==S)return document.createTextNode(O);e=document.createElementNS(s,S,O.is&&O),u&&(i.__m&&i.__m(t,a),u=!1),a=null}if(null==S)w===O||u&&e.data==O||(e.data=O);else{if(a=a&&r.call(e.childNodes),w=n.props||g,!u&&null!=a)for(w={},f=0;f<e.attributes.length;f++)w[(v=e.attributes[f]).name]=v.value;for(f in w)if(v=w[f],"children"==f);else if("dangerouslySetInnerHTML"==f)p=v;else if(!(f in O)){if("value"==f&&"defaultValue"in O||"checked"==f&&"defaultChecked"in O)continue;C(e,f,null,v,s)}for(f in O)v=O[f],"children"==f?h=v:"dangerouslySetInnerHTML"==f?d=v:"value"==f?y=v:"checked"==f?_=v:u&&"function"!=typeof v||w[f]===v||C(e,f,v,w[f],s);if(d)u||p&&(d.__html==p.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(p&&(e.innerHTML=""),E("template"==t.type?e.content:e,m(h)?h:[h],t,n,o,"foreignObject"==S?"http://www.w3.org/1999/xhtml":s,a,l,a?a[0]:n.__k&&P(n,0),u,c),null!=a)for(f=a.length;f--;)b(a[f]);u||(f="value","progress"==S&&null==y?e.removeAttribute("value"):null!=y&&(y!==e[f]||"progress"==S&&!y||"option"==S&&y!=w[f])&&C(e,f,y,w[f],s),f="checked",null!=_&&_!=e[f]&&C(e,f,_,w[f],s))}return e}function q(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,n)}}function W(e,t,n){var r,o;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||q(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&W(r[o],t,n||"function"!=typeof e.type);n||b(e.__e),e.__c=e.__=e.__e=void 0}function $(e,t,n){return this.constructor(e,n)}function H(e,t,n){var o,s,a,l;t==document&&(t=document.documentElement),i.__&&i.__(e,t),s=(o="function"==typeof n)?null:n&&n.__k||t.__k,a=[],l=[],D(t,e=(!o&&n||t).__k=w(k,null,[e]),s||g,g,t.namespaceURI,!o&&n?[n]:s?null:t.firstChild?r.call(t.childNodes):null,a,!o&&n?n:s?s.__e:t.firstChild,o,l),z(a,e,l)}function X(e,t,n){var i,o,s,a,l=_({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==s?i=t[s]:"ref"==s?o=t[s]:l[s]=null==t[s]&&null!=a?a[s]:t[s];return arguments.length>2&&(l.children=arguments.length>3?r.call(arguments,2):n),O(e.type,l,i||e.key,o||e.ref,null)}r=v.slice,i={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},o=0,A.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=_({},this.state),"function"==typeof e&&(e=e(_({},n),this.props)),e&&_(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),F(this))},A.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),F(this))},A.prototype.render=k,s=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},j.__r=0,c=/(PointerCapture)$|Capture$/i,f=0,d=R(!1),p=R(!0)},43146:(e,t,n)=>{n(34782),n(58940),n(27495),n(90906);var r=n(35252),i=n(67873),o=n(78766),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},48646:(e,t,n)=>{"use strict";var r=n(69565),i=n(28551),o=n(1767),s=n(50851);e.exports=function(e,t){t&&"string"==typeof e||i(e);var n=s(e);return o(i(void 0!==n?r(n,e):e))}},51391:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e}},51494:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(62010);var r=n(77943),i=n(63265);function o(e){var t;if(e.type)return e.type;var n=e.name?null==(t=(0,r.A)(e.name).extension)?void 0:t.toLowerCase():null;return n&&n in i.A?i.A[n]:"application/octet-stream"}},53921:(e,t,n)=>{"use strict";var r=n(46518),i=n(72652),o=n(97040);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),{AS_ENTRIES:!0}),t}})},59209:(e,t,n)=>{n(16280),n(76918),n(76031);var r=n(67873),i=n(93224),o=n(43146),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,u,c,f,d,p,h=0,g=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=l,r=u;return l=u=void 0,h=t,f=e.apply(r,n)}function _(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-h>=c}function b(){var e=i();if(_(e))return w(e);d=setTimeout(b,function(e){var n=t-(e-p);return v?a(n,c-(e-h)):n}(e))}function w(e){return d=void 0,y&&l?m(e):(l=u=void 0,f)}function O(){var e=i(),n=_(e);if(l=arguments,u=this,p=e,n){if(void 0===d)return function(e){return h=e,d=setTimeout(b,t),g?m(e):f}(p);if(v)return clearTimeout(d),d=setTimeout(b,t),m(p)}return void 0===d&&(d=setTimeout(b,t)),f}return t=o(t)||0,r(n)&&(g=!!n.leading,c=(v="maxWait"in n)?s(o(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),O.cancel=function(){void 0!==d&&clearTimeout(d),h=0,l=p=u=d=void 0},O.flush=function(){return void 0===d?f:w(i())},O}},63265:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},70647:(e,t,n)=>{n(28706),n(25276),n(44114),n(79432),e.exports=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,i,o,s,a){var l=function(e){var n=t[e]?t[e]:[],r=e.indexOf(":"),i=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],o=Object.keys(t),s=0,a=o.length;for(;s<a;s++){var l=o[s];if("*"===l&&(n=n.concat(t[l])),2===i.length&&i[0]===l){n=n.concat(t[l]);break}}return n}(e);l.length&&function(e,t,n){var r=0,i=t.length;for(;r<i&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,l,[n,r,i,o,s,a])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,(function r(){n.apply(this,arguments),e.off(t,r)}))},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],i=0,o=r?r.length:0;i<o;i++)r[i]!==t&&n.push(r[i]);n.length?this._fns[e]=n:delete this._fns[e]},e}},73848:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var r=n(58237),i=n(84285),o=n(68119),s=n(36858),a=n(31061),l=n(46983),u=(n(16280),n(76918),n(28706),n(84185),n(26099),n(3362),n(60825),n(36480)),c=n(10826);const f=function(e,t){return void 0===t&&(t=document),"string"==typeof e?t.querySelector(e):(0,c.A)(e)?e:null};var d=n(36118),p=n(32744);function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function g(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var v=0;function y(e){return"__private_"+v+++"_"+e}var m=y("updateUI");const _=function(e){function t(){var e,n,i,a;return(0,r.A)(this,t),n=this,i=t,a=arguments,i=(0,s.A)(i),e=(0,o.A)(n,h()?Reflect.construct(i,a||[],(0,s.A)(n).constructor):i.apply(n,a)),Object.defineProperty(e,m,{writable:!0,value:void 0}),e}return(0,a.A)(t,e),(0,i.A)(t,[{key:"getTargetPlugin",value:function(e){var n;if("function"==typeof(null==e?void 0:e.addTarget))(n=e)instanceof t||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:t}}));else if("function"==typeof e){var r=e;this.uppy.iteratePlugins((function(e){e instanceof r&&(n=e)}))}return n}},{key:"mount",value:function(e,t){var n,r,i,o=this,s=t.id,a=f(e);if(a){this.isTargetDOMEl=!0;var c=document.createElement("div");return c.classList.add("uppy-Root"),g(this,m)[m]=(n=function(e){o.uppy.getPlugin(o.id)&&((0,u.XX)(o.render(e),c),o.afterUpdate())},i=null,function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r=t,i||(i=Promise.resolve().then((function(){return i=null,n.apply(void 0,(0,l.A)(r))}))),i}),this.uppy.log("Installing ".concat(s," to a DOM element '").concat(e,"'")),this.opts.replaceTargetContent&&(a.innerHTML=""),(0,u.XX)(this.render(this.uppy.getState()),c),this.el=c,a.appendChild(c),c.dir=this.opts.direction||(0,d.A)(c)||"ltr",this.onMount(),this.el}var p=this.getTargetPlugin(e);if(p)return this.uppy.log("Installing ".concat(s," to ").concat(p.id)),this.parent=p,this.el=p.addTarget(t),this.onMount(),this.el;this.uppy.log("Not installing ".concat(s));var h="Invalid target option given to ".concat(s,".");throw h+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(h)}},{key:"render",value:function(e){throw new Error("Extend the render method to add your plugin to a DOM element")}},{key:"update",value:function(e){var t,n;null!=this.el&&(null==(t=(n=g(this,m))[m])||t.call(n,e))}},{key:"unmount",value:function(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove());this.onUnmount()}},{key:"onMount",value:function(){}},{key:"onUnmount",value:function(){}}])}(p.A)},77001:(e,t,n)=>{"use strict";n.d(t,{w:()=>s,I:()=>o});n(28706),n(76918),n(23288),n(26099),n(38781);function r(e){return e<10?"0".concat(e):e.toString()}function i(){var e=new Date,t=r(e.getHours()),n=r(e.getMinutes()),i=r(e.getSeconds());return"".concat(t,":").concat(n,":").concat(i)}var o={debug:function(){},warn:function(){},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["[Uppy] [".concat(i(),"]")].concat(n))}},s={debug:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).debug.apply(e,["[Uppy] [".concat(i(),"]")].concat(n))},warn:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,["[Uppy] [".concat(i(),"]")].concat(n))},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["[Uppy] [".concat(i(),"]")].concat(n))}}},77943:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(8921),n(34782);function r(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}},78029:(e,t,n)=>{"use strict";var r=n(89990);n(16280),n(76918),n(28706),n(2892),n(40150),n(9868),e.exports=function(e){if("number"!=typeof e||Number.isNaN(e))throw new TypeError("Expected a number, got ".concat(r(e)));var t=e<0,n=Math.abs(e);if(t&&(n=-n),0===n)return"0 B";var i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.min(Math.floor(Math.log(n)/Math.log(1024)),i.length-1),s=Number(n/Math.pow(1024,o)),a=i[o];return"".concat(s>=10||s%1==0?Math.round(s):s.toFixed(1)," ").concat(a)}},78347:(e,t,n)=>{"use strict";n(46518)({target:"Object",stat:!0},{hasOwn:n(39297)})},78350:(e,t,n)=>{"use strict";var r=n(46518),i=n(70259),o=n(79306),s=n(48981),a=n(26198),l=n(1469);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=s(this),r=a(n);return o(e),(t=l(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},78655:(e,t,n)=>{"use strict";n.d(t,{A:()=>Te});var r=n(18443),i=n(46983),o=n(18180),s=n(80241),a=n(51531),l=n(58237),u=n(84285),c=n(61792),f=(n(16280),n(52675),n(89463),n(2259),n(76918),n(30067),n(4294),n(28706),n(2008),n(50113),n(48980),n(46449),n(78350),n(51629),n(23418),n(25276),n(64346),n(23792),n(48598),n(62062),n(44114),n(72712),n(34782),n(15086),n(54554),n(93514),n(30237),n(59089),n(23288),n(94170),n(62010),n(36033),n(25428),n(59904),n(67945),n(84185),n(5506),n(53921),n(78347),n(79432),n(83851),n(81278),n(26099),n(16034),n(3362),n(27495),n(90906),n(38781),n(31415),n(47764),n(42762),n(98992),n(54520),n(72577),n(30670),n(3949),n(81454),n(8872),n(37550),n(23500),n(62953),n(76031),n(13656)),d=n(70647),p=n(51391),h=n(34034);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var m=0;function _(e){return"__private_"+m+++"_"+e}var b=_("callbacks"),w=_("publish"),O=function(){return(0,u.A)((function e(){(0,l.A)(this,e),Object.defineProperty(this,w,{value:S}),this.state={},Object.defineProperty(this,b,{writable:!0,value:new Set})}),[{key:"getState",value:function(){return this.state}},{key:"setState",value:function(e){var t=v({},this.state),n=v(v({},this.state),e);this.state=n,y(this,w)[w](t,n,e)}},{key:"subscribe",value:function(e){var t=this;return y(this,b)[b].add(e),function(){y(t,b)[b].delete(e)}}}])}();function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y(this,b)[b].forEach((function(e){e.apply(void 0,t)}))}O.VERSION="3.2.2";const k=O;var A=n(51494),P=n(77943),x=n(21214);n(58940);function F(e){if(null==e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),!e)return!0;var t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;var n=t[1].split(".",2),r=parseInt(n[0],10),i=parseInt(n[1],10);return r<15||15===r&&i<15063||(r>18||18===r&&i>=18218)}var j=n(77001),E=(n(60825),n(68119)),U=n(36858),T=n(31061),M=n(81700),I=(n(74423),n(21699),n(25440),n(78029)),N=n(21397);function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var z={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},L=function(e){function t(e,n){var r,i,o,s,a;return(0,l.A)(this,t),o=this,s=t,a=[e],s=(0,U.A)(s),(r=(0,E.A)(o,D()?Reflect.construct(s,a||[],(0,U.A)(o).constructor):s.apply(o,a))).isRestriction=!0,r.isUserFacing=null==(i=null==n?void 0:n.isUserFacing)||i,null!=n&&n.file&&(r.file=n.file),r}return(0,T.A)(t,e),(0,u.A)(t)}((0,M.A)(Error)),B=function(){return(0,u.A)((function e(t,n){(0,l.A)(this,e),this.i18n=n,this.getOpts=function(){var e,n=t();if(null!=(null==(e=n.restrictions)?void 0:e.allowedFileTypes)&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}),[{key:"validateAggregateRestrictions",value:function(e,t){var n=this.getOpts().restrictions,r=n.maxTotalFileSize,i=n.maxNumberOfFiles;if(i&&e.filter((function(e){return!e.isGhost})).length+t.length>i)throw new L("".concat(this.i18n("youCanOnlyUploadX",{smart_count:i})));if(r){var o,s=e.reduce((function(e,t){var n;return e+(null!=(n=t.size)?n:0)}),0),a=C(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(null!=l.size&&(s+=l.size)>r)throw new L(this.i18n("exceedsSize",{size:I(r),file:l.name}))}}catch(e){a.e(e)}finally{a.f()}}}},{key:"validateSingleFile",value:function(e){var t=this.getOpts().restrictions,n=t.maxFileSize,r=t.minFileSize,i=t.allowedFileTypes;if(i&&!i.some((function(t){return t.includes("/")?!!e.type&&N(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase()}))){var o=i.join(", ");throw new L(this.i18n("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(n&&null!=e.size&&e.size>n)throw new L(this.i18n("exceedsSize",{size:I(n),file:e.name}),{file:e});if(r&&null!=e.size&&e.size<r)throw new L(this.i18n("inferiorSize",{size:I(r)}),{file:e})}},{key:"validate",value:function(e,t){var n=this;t.forEach((function(e){n.validateSingleFile(e)})),this.validateAggregateRestrictions(e,t)}},{key:"validateMinNumberOfFiles",value:function(e){var t=this.getOpts().restrictions.minNumberOfFiles;if(t&&Object.keys(e).length<t)throw new L(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}},{key:"getMissingRequiredMetaFields",value:function(e){var t,n=new L(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),r=[],i=C(this.getOpts().restrictions.requiredMetaFields);try{for(i.s();!(t=i.n()).done;){var o=t.value;Object.hasOwn(e.meta,o)&&""!==e.meta[o]||r.push(o)}}catch(e){i.e(e)}finally{i.f()}return{missingFields:r,error:n}}}])}();const q={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled"}};function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Y=0;function V(e){return"__private_"+Y+++"_"+e}var K={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Z=V("plugins"),J=V("restricter"),Q=V("storeUnsubscribe"),ee=V("emitter"),te=V("preProcessors"),ne=V("uploaders"),re=V("postProcessors"),ie=V("informAndEmit"),oe=V("checkRequiredMetaFieldsOnFile"),se=V("checkRequiredMetaFields"),ae=V("assertNewUploadAllowed"),le=V("transformFile"),ue=V("startIfAutoProceed"),ce=V("checkAndUpdateFileState"),fe=V("addListeners"),de=V("updateOnlineStatus"),pe=V("requestClientById"),he=V("createUpload"),ge=V("getUpload"),ve=V("removeUpload"),ye=V("runUpload"),me=function(e,t){return(0,u.A)((function e(t){var n=this;(0,l.A)(this,e),Object.defineProperty(this,ye,{value:Ee}),Object.defineProperty(this,ve,{value:je}),Object.defineProperty(this,ge,{value:Fe}),Object.defineProperty(this,he,{value:xe}),Object.defineProperty(this,fe,{value:Pe}),Object.defineProperty(this,ce,{value:Ae}),Object.defineProperty(this,ue,{value:ke}),Object.defineProperty(this,le,{value:Se}),Object.defineProperty(this,ae,{value:Oe}),Object.defineProperty(this,se,{value:we}),Object.defineProperty(this,oe,{value:be}),Object.defineProperty(this,ie,{value:_e}),Object.defineProperty(this,Z,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:d()}),Object.defineProperty(this,te,{writable:!0,value:new Set}),Object.defineProperty(this,ne,{writable:!0,value:new Set}),Object.defineProperty(this,re,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=h((function(e,t){var r=n.getFile(null==e?void 0:e.id);if(null!=e&&r)if(100!==r.progress.percentage){var i=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;n.setFileState(e.id,{progress:X(X({},r.progress),{},{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:i?Math.round(t.bytesUploaded/t.bytesTotal*100):0})}),n.calculateTotalProgress()}else n.log("Not setting progress for a file that has been already uploaded: ".concat(e.id));else n.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))}),500,{leading:!0,trailing:!0}),Object.defineProperty(this,de,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,pe,{writable:!0,value:new Map}),this.defaultLocale=q;var r={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:z,meta:{},onBeforeFileAdded:function(e,t){return!Object.hasOwn(t,e.id)},onBeforeUpload:function(e){return e},store:new k,logger:j.I,infoTimeout:5e3},i=X(X({},r),t);this.opts=X(X({},i),{},{restrictions:X(X({},r.restrictions),t&&t.restrictions)}),t&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t&&t.debug&&(this.opts.logger=j.w),this.log("Using Core v".concat(e.VERSION)),this.i18nInit(),this.store=this.opts.store,this.setState(X(X({},K),{},{plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:F(),individualCancellation:!0,resumableUploads:!1},meta:X({},this.opts.meta),info:[]})),G(this,J)[J]=new B((function(){return n.opts}),this.i18n),G(this,Q)[Q]=this.store.subscribe((function(e,t,r){n.emit("state-update",e,t,r),n.updateAll(t)})),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),G(this,fe)[fe]()}),[{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=G(this,ee)[ee]).emit.apply(t,[e].concat(r))}},{key:"on",value:function(e,t){return G(this,ee)[ee].on(e,t),this}},{key:"once",value:function(e,t){return G(this,ee)[ee].once(e,t),this}},{key:"off",value:function(e,t){return G(this,ee)[ee].off(e,t),this}},{key:"updateAll",value:function(e){this.iteratePlugins((function(t){t.update(e)}))}},{key:"setState",value:function(e){this.store.setState(e)}},{key:"getState",value:function(){return this.store.getState()}},{key:"patchFilesState",value:function(e){var t=this.getState().files;this.setState({files:X(X({},t),Object.fromEntries(Object.entries(e).map((function(e){var n=(0,s.A)(e,2),r=n[0],i=n[1];return[r,X(X({},t[r]),i)]}))))})}},{key:"setFileState",value:function(e,t){if(!this.getState().files[e])throw new Error("Can’t set state for ".concat(e," (the file could have been removed)"));this.patchFilesState((0,a.A)({},e,t))}},{key:"i18nInit",value:function(){var e=this,t=new f.A([this.defaultLocale,this.opts.locale],{onMissingKey:function(t){return e.log("Missing i18n string: ".concat(t),"error")}});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}},{key:"setOptions",value:function(e){this.opts=X(X(X({},this.opts),e),{},{restrictions:X(X({},this.opts.restrictions),null==e?void 0:e.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((function(t){t.setOptions(e)})),this.setState(void 0)}},{key:"resetProgress",value:function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t=X({},this.getState().files),n={};Object.keys(t).forEach((function(r){n[r]=X(X({},t[r]),{},{progress:X(X({},t[r].progress),e)})})),this.setState(X({files:n},K)),this.emit("reset-progress")}},{key:"clearUploadedFiles",value:function(){this.setState(X(X({},K),{},{files:{}}))}},{key:"addPreProcessor",value:function(e){G(this,te)[te].add(e)}},{key:"removePreProcessor",value:function(e){return G(this,te)[te].delete(e)}},{key:"addPostProcessor",value:function(e){G(this,re)[re].add(e)}},{key:"removePostProcessor",value:function(e){return G(this,re)[re].delete(e)}},{key:"addUploader",value:function(e){G(this,ne)[ne].add(e)}},{key:"removeUploader",value:function(e){return G(this,ne)[ne].delete(e)}},{key:"setMeta",value:function(e){var t=X(X({},this.getState().meta),e),n=X({},this.getState().files);Object.keys(n).forEach((function(t){n[t]=X(X({},n[t]),{},{meta:X(X({},n[t].meta),e)})})),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}},{key:"setFileMeta",value:function(e,t){var n=X({},this.getState().files);if(n[e]){var r=X(X({},n[e].meta),t);n[e]=X(X({},n[e]),{},{meta:r}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that has been removed: ",e)}},{key:"getFile",value:function(e){return this.getState().files[e]}},{key:"getFiles",value:function(){var e=this.getState().files;return Object.values(e)}},{key:"getFilesByIds",value:function(e){var t=this;return e.map((function(e){return t.getFile(e)}))}},{key:"getObjectOfFilesPerState",value:function(){var e=this.getState(),t=e.files,n=e.totalProgress,r=e.error,i=Object.values(t),o=i.filter((function(e){var t=e.progress;return!t.uploadComplete&&t.uploadStarted})),s=i.filter((function(e){return!e.progress.uploadStarted})),a=i.filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess})),l=i.filter((function(e){return e.progress.uploadStarted})),u=i.filter((function(e){return e.isPaused})),c=i.filter((function(e){return e.progress.uploadComplete})),f=i.filter((function(e){return e.error})),d=o.filter((function(e){return!e.isPaused})),p=i.filter((function(e){return e.progress.preprocess||e.progress.postprocess}));return{newFiles:s,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:c,erroredFiles:f,inProgressFiles:o,inProgressNotPausedFiles:d,processingFiles:p,isUploadStarted:l.length>0,isAllComplete:100===n&&c.length===i.length&&0===p.length,isAllErrored:!!r&&f.length===i.length,isAllPaused:0!==o.length&&u.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:i.some((function(e){return e.isGhost}))}}},{key:"validateRestrictions",value:function(e,t){void 0===t&&(t=this.getFiles());try{G(this,J)[J].validate(t,[e])}catch(e){return e}return null}},{key:"checkIfFileAlreadyExists",value:function(e){var t=this.getState().files;return!(!t[e]||t[e].isGhost)}},{key:"addFile",value:function(e){G(this,ae)[ae](e);var t=G(this,ce)[ce]([e]),n=t.nextFilesState,r=t.validFilesToAdd,i=t.errors,o=i.filter((function(e){return e.isRestriction}));if(G(this,ie)[ie](o),i.length>0)throw i[0];this.setState({files:n});var a=(0,s.A)(r,1)[0];return this.emit("file-added",a),this.emit("files-added",r),this.log("Added file: ".concat(a.name,", ").concat(a.id,", mime type: ").concat(a.type)),G(this,ue)[ue](),a.id}},{key:"addFiles",value:function(e){var t=this;G(this,ae)[ae]();var n=G(this,ce)[ce](e),r=n.nextFilesState,i=n.validFilesToAdd,o=n.errors,s=o.filter((function(e){return e.isRestriction}));G(this,ie)[ie](s);var a=o.filter((function(e){return!e.isRestriction}));if(a.length>0){var l="Multiple errors occurred while adding files:\n";if(a.forEach((function(e){l+="\n * ".concat(e.message)})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:a.length}),details:l},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(a,l);var u=new Error(l);throw u.errors=a,u}this.setState({files:r}),i.forEach((function(e){t.emit("file-added",e)})),this.emit("files-added",i),i.length>5?this.log("Added batch of ".concat(i.length," files")):Object.values(i).forEach((function(e){t.log("Added file: ".concat(e.name,"\n id: ").concat(e.id,"\n type: ").concat(e.type))})),i.length>0&&G(this,ue)[ue]()}},{key:"removeFiles",value:function(e,t){var n=this,r=this.getState(),i=r.files,o=r.currentUploads,s=X({},i),a=X({},o),l=Object.create(null);function u(e){return void 0===l[e]}e.forEach((function(e){i[e]&&(l[e]=i[e],delete s[e])})),Object.keys(a).forEach((function(e){var t=o[e].fileIDs.filter(u);if(0!==t.length){var r=n.getState().capabilities;if(t.length!==o[e].fileIDs.length&&!r.individualCancellation)throw new Error("individualCancellation is disabled");a[e]=X(X({},o[e]),{},{fileIDs:t})}else delete a[e]}));var c={currentUploads:a,files:s};0===Object.keys(s).length&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),this.calculateTotalProgress();var f=Object.keys(l);f.forEach((function(e){n.emit("file-removed",l[e],t)})),f.length>5?this.log("Removed ".concat(f.length," files")):this.log("Removed files: ".concat(f.join(", ")))}},{key:"removeFile",value:function(e,t){this.removeFiles([e],t)}},{key:"pauseResume",value:function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).progress.uploadComplete){var t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}}},{key:"pauseAll",value:function(){var e=X({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=X(X({},e[t]),{},{isPaused:!0});e[t]=n})),this.setState({files:e}),this.emit("pause-all")}},{key:"resumeAll",value:function(){var e=X({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=X(X({},e[t]),{},{isPaused:!1,error:null});e[t]=n})),this.setState({files:e}),this.emit("resume-all")}},{key:"retryAll",value:function(){var e=X({},this.getState().files),t=Object.keys(e).filter((function(t){return e[t].error}));if(t.forEach((function(t){var n=X(X({},e[t]),{},{isPaused:!1,error:null});e[t]=n})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});var n=G(this,he)[he](t,{forceAllowNewUpload:!0});return G(this,ye)[ye](n)}},{key:"cancelAll",value:function(e){var t=(void 0===e?{}:e).reason,n=void 0===t?"user":t;if(this.emit("cancel-all",{reason:n}),"user"===n){var r=this.getState().files,i=Object.keys(r);i.length&&this.removeFiles(i,"cancel-all"),this.setState(K)}}},{key:"retryUpload",value:function(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);var t=G(this,he)[he]([e],{forceAllowNewUpload:!0});return G(this,ye)[ye](t)}},{key:"logout",value:function(){this.iteratePlugins((function(e){var t;null==(t=e.provider)||null==t.logout||t.logout()}))}},{key:"calculateTotalProgress",value:function(){var e=this.getFiles().filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess}));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter((function(e){return null!=e.progress.bytesTotal})),n=e.filter((function(e){return null==e.progress.bytesTotal}));if(0!==t.length){var r=t.reduce((function(e,t){var n;return e+(null!=(n=t.progress.bytesTotal)?n:0)}),0),i=r/t.length;r+=i*n.length;var o=0;t.forEach((function(e){o+=e.progress.bytesUploaded})),n.forEach((function(e){o+=i*(e.progress.percentage||0)/100}));var s=0===r?0:Math.round(o/r*100);s>100&&(s=100),this.setState({totalProgress:s}),this.emit("progress",s)}else{var a=100*e.length,l=n.reduce((function(e,t){return e+t.progress.percentage}),0),u=Math.round(l/a*100);this.setState({totalProgress:u})}}},{key:"updateOnlineStatus",value:function(){var e;null==(e=window.navigator.onLine)||e?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}},{key:"getID",value:function(){return this.opts.id}},{key:"use",value:function(e,t){if("function"!=typeof e){var n="Expected a plugin class, but got ".concat(null===e?"null":(0,o.A)(e),".")+" Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var r=new e(this,t),i=r.id;if(!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");var s=this.getPlugin(i);if(s){var a="Already found a plugin named '".concat(s.id,"'. ")+"Tried to use: '".concat(i,"'.\n")+"Uppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id.";throw new Error(a)}return e.VERSION&&this.log("Using ".concat(i," v").concat(e.VERSION)),r.type in G(this,Z)[Z]?G(this,Z)[Z][r.type].push(r):G(this,Z)[Z][r.type]=[r],r.install(),this.emit("plugin-added",r),this}},{key:"getPlugin",value:function(e){for(var t=0,n=Object.values(G(this,Z)[Z]);t<n.length;t++){var r=n[t].find((function(t){return t.id===e}));if(null!=r)return r}}},{key:e,value:function(e){return G(this,Z)[Z][e]}},{key:"iteratePlugins",value:function(e){Object.values(G(this,Z)[Z]).flat(1).forEach(e)}},{key:"removePlugin",value:function(e){this.log("Removing plugin ".concat(e.id)),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var t=G(this,Z)[Z][e.type],n=t.findIndex((function(t){return t.id===e.id}));-1!==n&&t.splice(n,1);var r={plugins:X(X({},this.getState().plugins),{},(0,a.A)({},e.id,void 0))};this.setState(r)}},{key:"close",value:function(e){var t=this,n=(void 0===e?{}:e).reason;this.log("Closing Uppy instance ".concat(this.opts.id,": removing all files and uninstalling plugins")),this.cancelAll({reason:n}),G(this,Q)[Q](),this.iteratePlugins((function(e){t.removePlugin(e)})),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",G(this,de)[de]),window.removeEventListener("offline",G(this,de)[de]))}},{key:"hideInfo",value:function(){var e=this.getState().info;this.setState({info:e.slice(1)}),this.emit("info-hidden")}},{key:"info",value:function(e,t,n){var r=this;void 0===t&&(t="info"),void 0===n&&(n=3e3);var s="object"===(0,o.A)(e);this.setState({info:[].concat((0,i.A)(this.getState().info),[{type:t,message:s?e.message:e,details:s?e.details:null}])}),setTimeout((function(){return r.hideInfo()}),n),this.emit("info-visible")}},{key:"log",value:function(e,t){var n=this.opts.logger;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}}},{key:"registerRequestClient",value:function(e,t){G(this,pe)[pe].set(e,t)}},{key:"getRequestClientForFile",value:function(e){if(!e.remote)throw new Error("Tried to get RequestClient for a non-remote file ".concat(e.id));var t=G(this,pe)[pe].get(e.remote.requestClientId);if(null==t)throw new Error('requestClientId "'.concat(e.remote.requestClientId,'" not registered for file "').concat(e.id,'"'));return t}},{key:"restore",value:function(e){return this.log('Core: attempting to restore upload "'.concat(e,'"')),this.getState().currentUploads[e]?G(this,ye)[ye](e):(G(this,ve)[ve](e),Promise.reject(new Error("Nonexistent upload")))}},{key:t,value:function(){var e;return(e=G(this,he))[he].apply(e,arguments)}},{key:"addResultData",value:function(e,t){if(G(this,ge)[ge](e)){var n=this.getState().currentUploads,r=X(X({},n[e]),{},{result:X(X({},n[e].result),t)});this.setState({currentUploads:X(X({},n),{},(0,a.A)({},e,r))})}else this.log("Not setting result for an upload that has been removed: ".concat(e))}},{key:"upload",value:function(){var e,t=this;null!=(e=G(this,Z)[Z].uploader)&&e.length||this.log("No uploader type plugins are used","warning");var n=this.getState().files,r=this.opts.onBeforeUpload(n);return!1===r?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&"object"===(0,o.A)(r)&&(n=r,this.setState({files:n})),Promise.resolve().then((function(){return G(t,J)[J].validateMinNumberOfFiles(n)})).catch((function(e){throw G(t,ie)[ie]([e]),e})).then((function(){if(!G(t,se)[se](n))throw new L(t.i18n("missingRequiredMetaField"))})).catch((function(e){throw e})).then((function(){var e=t.getState().currentUploads,r=Object.values(e).flatMap((function(e){return e.fileIDs})),i=[];Object.keys(n).forEach((function(e){var n=t.getFile(e);n.progress.uploadStarted||-1!==r.indexOf(e)||i.push(n.id)}));var o=G(t,he)[he](i);return G(t,ye)[ye](o)})).catch((function(e){throw t.emit("error",e),t.log(e,"error"),e})))}}])}(Symbol.for("uppy test: getPlugins"),Symbol.for("uppy test: createUpload"));function _e(e){var t,n=this,r=W(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.isRestriction?this.emit("restriction-failed",i.file,i):this.emit("error",i,i.file),this.log(i,"warning")}}catch(e){r.e(e)}finally{r.f()}var o=e.filter((function(e){return e.isUserFacing})),s=o.slice(0,4),a=o.slice(4);s.forEach((function(e){var t=e.message,r=e.details,i=void 0===r?"":r;n.info({message:t,details:i},"error",n.opts.infoTimeout)})),a.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:a.length})})}function be(e){var t=G(this,J)[J].getMissingRequiredMetaFields(e),n=t.missingFields,r=t.error;return!(n.length>0)||(this.setFileState(e.id,{missingRequiredMetaFields:n}),this.log(r.message),this.emit("restriction-failed",e,r),!1)}function we(e){for(var t=!0,n=0,r=Object.values(e);n<r.length;n++){var i=r[n];G(this,oe)[oe](i)||(t=!1)}return t}function Oe(e){if(!1===this.getState().allowNewUpload){var t=new L(this.i18n("noMoreFilesAllowed"),{file:e});throw G(this,ie)[ie]([t]),t}}function Se(e){var t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,n=(0,A.A)(t),r=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?"".concat(e.split("/")[0],".").concat(e.split("/")[1]):"noname"}(n,t),i=(0,P.A)(r).extension,o=(0,x.N)(t),s=t.meta||{};s.name=r,s.type=n;var a=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:r,extension:i||"",meta:X(X({},this.getState().meta),s),type:n,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote||"",preview:t.preview}}function ke(){var e=this;this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((function(){e.scheduledAutoProceed=null,e.upload().catch((function(t){t.isRestriction||e.log(t.stack||t.message||t)}))}),4))}function Ae(e){var t,n=this.getState().files,r=X({},n),i=[],s=[],a=W(e);try{for(a.s();!(t=a.n()).done;){var l=t.value;try{var u,c=G(this,le)[le](l),f=null==(u=n[c.id])?void 0:u.isGhost;if(f)c=X(X({},n[c.id]),{},{isGhost:!1,data:l.data}),this.log("Replaced the blob in the restored ghost file: ".concat(c.name,", ").concat(c.id));var d=this.opts.onBeforeFileAdded(c,r);if(!d&&this.checkIfFileAlreadyExists(c.id))throw new L(this.i18n("noDuplicates",{fileName:c.name}),{file:l});if(!1===d&&!f)throw new L("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});"object"===(0,o.A)(d)&&null!==d&&(c=d),G(this,J)[J].validateSingleFile(c),r[c.id]=c,i.push(c)}catch(e){s.push(e)}}}catch(e){a.e(e)}finally{a.f()}try{G(this,J)[J].validateAggregateRestrictions(Object.values(n),i)}catch(e){return s.push(e),{nextFilesState:n,validFilesToAdd:[],errors:s}}return{nextFilesState:r,validFilesToAdd:i,errors:s}}function Pe(){var e=this,t=function(t,n,r){var i=t.message||"Unknown error";t.details&&(i+=" ".concat(t.details)),e.setState({error:i}),null!=n&&n.id in e.getState().files&&e.setFileState(n.id,{error:i,response:r})};this.on("error",t),this.on("upload-error",(function(n,r,i){if(t(r,n,i),"object"===(0,o.A)(r)&&r.message){var s;e.log(r.message,"error");var a=new Error(e.i18n("failedToUpload",{file:null!=(s=null==n?void 0:n.name)?s:""}));a.isUserFacing=!0,a.details=r.message,r.details&&(a.details+=" ".concat(r.details)),G(e,ie)[ie]([a])}else G(e,ie)[ie]([r])}));var n=null;this.on("upload-stalled",(function(t,r){var i=t.message,o=r.map((function(e){return e.meta.name})).join(", ");n||(e.info({message:i,details:o},"warning",e.opts.infoTimeout),n=setTimeout((function(){n=null}),e.opts.infoTimeout)),e.log("".concat(i," ").concat(o).trim(),"warning")})),this.on("upload",(function(){e.setState({error:null})}));this.on("upload-start",(function(t){t.forEach((function(t){e.emit("upload-started",t)})),function(t){var n=t.filter((function(t){var n=null!=t&&e.getFile(t.id);return n||e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id)),n})),r=Object.fromEntries(n.map((function(e){return[e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}]})));e.patchFilesState(r)}(t)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(function(t,n){if(null!=t&&e.getFile(t.id)){var r=e.getFile(t.id).progress;e.setFileState(t.id,{progress:X(X({},r),{},{postprocess:G(e,re)[re].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),null==t.size&&e.setFileState(t.id,{size:n.bytesUploaded||r.bytesTotal}),e.calculateTotalProgress()}else e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("preprocess-progress",(function(t,n){null!=t&&e.getFile(t.id)?e.setFileState(t.id,{progress:X(X({},e.getFile(t.id).progress),{},{preprocess:n})}):e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("preprocess-complete",(function(t){if(null!=t&&e.getFile(t.id)){var n=X({},e.getState().files);n[t.id]=X(X({},n[t.id]),{},{progress:X({},n[t.id].progress)}),delete n[t.id].progress.preprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("postprocess-progress",(function(t,n){null!=t&&e.getFile(t.id)?e.setFileState(t.id,{progress:X(X({},e.getState().files[t.id].progress),{},{postprocess:n})}):e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("postprocess-complete",(function(t){if(null!=t&&e.getFile(t.id)){var n=X({},e.getState().files);n[t.id]=X(X({},n[t.id]),{},{progress:X({},n[t.id].progress)}),delete n[t.id].progress.postprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("restored",(function(){e.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(function(t){t&&G(e,oe)[oe](t)})),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",G(this,de)[de]),window.addEventListener("offline",G(this,de)[de]),setTimeout(G(this,de)[de],3e3))}function xe(e,t){void 0===t&&(t={});var n=t.forceAllowNewUpload,r=void 0!==n&&n,i=this.getState(),o=i.allowNewUpload,s=i.currentUploads;if(!o&&!r)throw new Error("Cannot create a new upload: already uploading.");var l=(0,p.A)();return this.emit("upload",{id:l,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:X(X({},s),{},(0,a.A)({},l,{fileIDs:e,step:0,result:{}}))}),l}function Fe(e){return this.getState().currentUploads[e]}function je(e){var t=X({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})}function Ee(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,r.A)(c.mark((function e(t){var n,r,o,s,l,u,f,d,p,h,g=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=function(){return g.getState().currentUploads[t]})(),o=[].concat((0,i.A)(G(this,te)[te]),(0,i.A)(G(this,ne)[ne]),(0,i.A)(G(this,re)[re])),e.prev=3,s=r.step||0;case 5:if(!(s<o.length)){e.next=17;break}if(r){e.next=8;break}return e.abrupt("break",17);case 8:return l=o[s],this.setState({currentUploads:X(X({},this.getState().currentUploads),{},(0,a.A)({},t,X(X({},r),{},{step:s})))}),u=r.fileIDs,e.next=13,l(u,t);case 13:r=n();case 14:s++,e.next=5;break;case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(3),G(this,ve)[ve](t),e.t0;case 23:return r&&(r.fileIDs.forEach((function(e){var t=g.getFile(e);t&&t.progress.postprocess&&g.emit("postprocess-complete",t)})),f=r.fileIDs.map((function(e){return g.getFile(e)})),d=f.filter((function(e){return!e.error})),p=f.filter((function(e){return e.error})),this.addResultData(t,{successful:d,failed:p,uploadID:t}),r=n()),r&&(h=r.result,this.emit("complete",h),G(this,ve)[ve](t)),null==h&&this.log("Not setting result for an upload that has been removed: ".concat(t)),e.abrupt("return",h);case 27:case"end":return e.stop()}}),e,this,[[3,19]])})))).apply(this,arguments)}me.VERSION="3.9.3";const Te=me},79876:(e,t,n)=>{n(27495),n(90906);var r=/\s/;e.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},83237:(e,t,n)=>{"use strict";n(70511)("replace")},93224:(e,t,n)=>{var r=n(42785);e.exports=function(){return r.Date.now()}}}]);